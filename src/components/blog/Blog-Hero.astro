---
import { Image } from "astro:assets";
import Sealy from "../../assets/Sealy-blog.webp";
import Hero from "../home/Hero.astro";
import { getCollection } from "astro:content";
const allPosts = await getCollection("posts");

const featuredForHero = allPosts
  .filter((post) => post.data.featured)
  .sort((a, b) => b.data.publishedAt.getTime() - a.data.publishedAt.getTime())
  .slice(0, 2);
// console.log("Featured posts for Hero:", featuredForHero);
// Get IDs of posts shown in Hero to exclude them
const heroPostIds = new Set(featuredForHero.map((p) => p.id));

// All other posts (excluding Hero's 2), sorted by date
const remainingPosts = allPosts
  .filter((post) => !heroPostIds.has(post.id))
  .sort((a, b) => b.data.publishedAt.getTime() - a.data.publishedAt.getTime());

// Homepage shows first 3 posts in FooterBlogRow
const postsPerPage = 3;
const totalPages = Math.ceil(remainingPosts.length / postsPerPage);
---

<div
  class="h-auto pb-30 w-full flex flex-col justify-start pt-20 items-center text-center bg-white overflow-hidden relative px-10"
>
  <div
    class="w-full text-center py-10 flex flex-col justify-center items-center space-y-6"
  >
    <h1 class="text-3xl font-bold lg:text-5xl">
      Tu negocio puede vender más! <br /> Aquí te explicamos cómo (sin código).
    </h1>
    <!-- <div class="flex flex-col-reverse md:flex-row items-center gap-4 max-w-xl">
      <Image
        width={1000}
        height={1000}
        src={Sealy}
        class="w-auto h-75 aspect-auto"
        alt="Blog_Hero_Image"
      />
      <p class="lg:text-xl text-start text-gray-600">
        Nuestra foca te guía con consejos simples para que tu página web trabaje
        por ti.
      </p>
    </div> -->
    <!-- <h2 class="text-xl font-bold lg:text-2xl">Nuestros artículos</h2> -->
    <Hero posts={allPosts} />
  </div>
</div>
